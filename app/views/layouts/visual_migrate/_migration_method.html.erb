<table border="0" style="margin-left:2em;">
  <tr>
    <th width="80em">Method</th>
    <td><%= text_field_tag '[methods][' + @migration_method.name + '][name]', @migration_method.name, :readonly => true %></td>
    <td><%= check_box_tag '[methods][' + @migration_method.name + '[enable]', true, @enable %>enableã€€</td>
  </tr>
  <tr>
    <td colspan="3">
      <% @migration_method.funcs.each do |key, val| %>
        <%= show_func(val) %> 
      <% end %>
    </td>
  </tr>
  <tr>
    <td colspan="3">
      <table id='new_func' border="0" style="margin-left:2em;">
        <tr>
          <th>FuncType</th>
          <th>Name</th>
        </tr>
        <tr>
          <td><%= func_select '[new_func][' + @migration_method.name + '][type]', '' %></td>
          <td><%= text_field_tag '[new_func][' + @migration_method.name + '][name]' %></td>
        </tr>
        <tr>
          <td colspan="2">
      <%= button_to_function :add_function, 'addFunc_' + @migration_method.name + '();' %>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<script type="text/javascript">

  function addFunc_<%= @migration_method.name %>(){
    if(document.getElementById("_new_func_<%= @migration_method.name %>_name").value == "") {
      alert("Input Function Name");
      return;
    }

    var obj = document.forms["vm_edit"];
    obj.method = "post";
    obj.action = "/visual-migrate/index/add_function/<%= params[:id] %>";
    //obj.target = "_blank";
    obj.submit();
  }

</script>
